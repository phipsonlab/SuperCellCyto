[{"path":[]},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement putri.g@wehi.edu.au. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to SuperCellCyto","title":"Contributing to SuperCellCyto","text":"outlines propose change SuperCellCyto.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CONTRIBUTING.html","id":"making-changes-to-the-package","dir":"","previous_headings":"","what":"Making changes to the package","title":"Contributing to SuperCellCyto","text":"want make change, please first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Making changes to the package","what":"Pull request process","title":"Contributing to SuperCellCyto","text":"Fork package clone onto computer. Install development dependencies devtools::install_dev_deps(). Create Git branch pull request (PR). can use usethis::pr_init(\"brief-description--change\"). Make changes, commit git. Make sure unit tests passing. can use devtools::test(). Create PR. Make sure title PR briefly describe change, body PR contain Fixes #issue-number.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to SuperCellCyto","text":"Please note SuperCellCyto project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"How to create supercells","text":"vignette describes steps reduce size vast high-dimensional cytometry data using SuperCellCyto, R package based SuperCell R package David Gfeller lab University Lausanne. Please note ’re still actively updating vignette (fact package ), welcome feedbacks improve . myriad ways use SuperCell. try cover many use cases possible, bound miss something. case, please reach github repository creating Github issue.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"How to create supercells","text":"install SuperCellCyto, need use remotes`` package CRAN.  can installremotesby using theinstall.packages(“remotes”)` command. Thereafter, can install SuperCellCyto using remotes::install_github(\"phipsonlab/SuperCellCyto\"). SuperCellCyto requires SuperCell R package installed run properly. use remotes::install_github command install SuperCellCyto, , theory, automatically installed. case doesn’t, can manually install using remotes::install_github(\"GfellerLab/SuperCell\").","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"preparing-your-dataset","dir":"Articles","previous_headings":"","what":"Preparing your dataset","title":"How to create supercells","text":"function creates supercells called runSuperCellCyto, operates data.table object, enhanced version R native data.frame. raw data stored csv file, can import data.table object using fread function. raw data stored across multiple csv files FCS files (common cytometry), need help Spectre R package import adata.table object. Specifically, need : Run read.files function read FCS csv files. Run .merge.files merge resulting data.table objects one. unsure steps work , look example Spectre vignette. Using vignette , csv files, can run steps vignette , changing InputDirectory variable. FCS files, need change file.type parameter read.files function .fcs. vignette, simulate toy data using simCytoData function. several things note dataset. Let’s go one one sub-section .","code":"n_markers <- 15 n_samples <- 3 dat <- SuperCellCyto::simCytoData(nmarkers = n_markers, ncells = rep(10000, n_samples)) head(dat) #>    Marker_1 Marker_2  Marker_3 Marker_4  Marker_5 Marker_6  Marker_7 Marker_8 #> 1: 16.25606 18.14575  9.548869 12.17178  9.028273 15.61863 13.662919 19.26841 #> 2: 16.82141 19.40778 11.555141 13.19103 11.629131 15.92035 10.771203 19.76645 #> 3: 16.40205 16.53930 11.315043 11.98860 10.302833 15.62479  8.719536 20.06792 #> 4: 18.16170 19.51574 10.555033 13.30105  8.201412 15.75832 12.218257 19.65611 #> 5: 16.07364 19.58259 10.410142 12.50632 10.797509 13.48594 12.002132 17.89459 #> 6: 17.26863 18.69557 11.668230 12.98325  8.077308 16.24577 12.168319 18.15234 #>    Marker_9 Marker_10 Marker_11 Marker_12 Marker_13 Marker_14 Marker_15 #> 1: 9.109605  16.19939  6.801168 10.568241  3.745733  6.772636  12.48848 #> 2: 7.236498  16.50387  6.404580 10.679662  5.448163  7.931340  13.52207 #> 3: 8.948140  17.74711  6.185180  7.817153  5.079171  7.516630  12.90391 #> 4: 7.376460  16.09171  5.819895  6.993930  6.544952  7.757599  13.14264 #> 5: 8.445737  17.98175  7.012131  9.006179  5.409446  8.066357  12.47985 #> 6: 9.470536  15.23757  6.380078  8.955770  8.256096  8.841446  11.84725 #>      Sample Cell_Id #> 1: Sample_1  Cell_1 #> 2: Sample_1  Cell_2 #> 3: Sample_1  Cell_3 #> 4: Sample_1  Cell_4 #> 5: Sample_1  Cell_5 #> 6: Sample_1  Cell_6"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"the-markers","dir":"Articles","previous_headings":"Preparing your dataset","what":"The markers","title":"How to create supercells","text":"runSuperCellCyto function perform data transformation scaling. Thus, must ensure dataset already appropriately transformed using either arc-sinh transformation linear binning (using FlowJo). tutorial explains data transformation process great detail: (https://wiki.centenary.org.au/display/SPECTRE/Data+transformation). Please read unsure transform data. toy dataset, transform data using arc-sinh transformation implementation provided base R asinh function: Breaking steps, : Identify columns denoting markers. Set co-factor 5. transformation store dat_asinh variable. Set dat_asinh column name reflect values column (marker) haas undergone arc-sinh transformation. Combine dat dat_asinh using cbind.","code":"# Specify which columns are the markers to transform marker_cols <- paste0(\"Marker_\", seq_len(n_markers)) # The co-factor for arc-sinh cofactor <- 5  # Do the transformation dat_asinh <- asinh(dat[, marker_cols, with = FALSE] / cofactor)  # Rename the new columns marker_cols_asinh <- paste0(marker_cols, \"_asinh\") names(dat_asinh) <- marker_cols_asinh  # Add them our previously loaded data dat <- cbind(dat, dat_asinh)  head(dat[, marker_cols_asinh, with = FALSE]) #>    Marker_1_asinh Marker_2_asinh Marker_3_asinh Marker_4_asinh Marker_5_asinh #> 1:       1.895028       2.000608       1.402541       1.622572       1.353184 #> 2:       1.927752       2.065578       1.574667       1.697371       1.580528 #> 3:       1.903577       1.911551       1.555429       1.608560       1.470398 #> 4:       2.001455       2.070951       1.492205       1.705142       1.270142 #> 5:       1.884247       2.074264       1.479729       1.647701       1.512773 #> 6:       1.952930       2.029416       1.583612       1.682540       1.257150 #>    Marker_6_asinh Marker_7_asinh Marker_8_asinh Marker_9_asinh Marker_10_asinh #> 1:       1.856863       1.730309       2.058600       1.361037        1.891691 #> 2:       1.875101       1.510560       2.083321       1.165170        1.909499 #> 3:       1.857238       1.322871       2.098002       1.345393        1.979210 #> 4:       1.865346       1.626098       2.077895       1.180979        1.885320 #> 5:       1.718075       1.609602       1.987178       1.295305        1.991859 #> 6:       1.894423       1.622309       2.000958       1.395250        1.833366 #>    Marker_11_asinh Marker_12_asinh Marker_13_asinh Marker_14_asinh #> 1:       1.1146489        1.493335       0.6924643        1.111264 #> 2:       1.0667615        1.502825       0.9433550        1.241683 #> 3:       1.0394688        1.229441       0.8925259        1.196607 #> 4:       0.9927073        1.137276       1.0839207        1.223006 #> 5:       1.1393915        1.351041       0.9381092        1.255996 #> 6:       1.0637423        1.346137       1.2758208        1.334936 #>    Marker_15_asinh #> 1:        1.646375 #> 2:        1.720584 #> 3:        1.676822 #> 4:        1.693936 #> 5:        1.645734 #> 6:        1.597624"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"cell-id-column","dir":"Articles","previous_headings":"Preparing your dataset","what":"Cell id column","title":"How to create supercells","text":"create supercell, must provide column uniquely identify cell, akin Cell_Id column toy data generated : purpose cell id allow SuperCell uniquely identify cell dataset. ID come super handy later /need work cells belong supercells. Generally, need create ID . dataset won’t come ID already embedded . simple cell id can made concatenating word Cell row number. Something like following: , store cell id column called Cell_id_dummy. values Cell_1, Cell_2, way Cell_x x number cells dataset. Note, can name cell id column however like, id, cell_identity, etc. Importantly, need make sure note column name need pass runSuperCellCyto function later.","code":"head(dat$Cell_Id, n = 10) #>  [1] \"Cell_1\"  \"Cell_2\"  \"Cell_3\"  \"Cell_4\"  \"Cell_5\"  \"Cell_6\"  \"Cell_7\"  #>  [8] \"Cell_8\"  \"Cell_9\"  \"Cell_10\" dat$Cell_id_dummy <- paste0(\"Cell_\", seq_len(nrow(dat))) head(dat$Cell_id_dummy, n = 10) #>  [1] \"Cell_1\"  \"Cell_2\"  \"Cell_3\"  \"Cell_4\"  \"Cell_5\"  \"Cell_6\"  \"Cell_7\"  #>  [8] \"Cell_8\"  \"Cell_9\"  \"Cell_10\""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"sample-column","dir":"Articles","previous_headings":"Preparing your dataset","what":"Sample column","title":"How to create supercells","text":"notice toy data , column called Sample. default, column refers biological sample cells come . toy data , 3 samples, Sample_1, Sample_2, Sample_3: 10,000 cells per sample: create supercells, necessary Sample column dataset. can name column however like, Samp, Cell_Samp. However, make sure note column name need pass runSuperCellCyto function. [Creating supercells][#creating-supercells] section. 1 biological sample dataset? matter. still need column dataset, pass column name runSuperCellCyto function. difference column 1 unique value. need ? ensure supercell contains cells exactly 1 sample. , general, make sense mix cells different biological samples one supercell. Additionally (important), runSuperCellCyto function can process samples parallel set BPPARAM parameter BiocParallelParam class leverage parallel processing. Running runSuperCellCyto parallel section . However, want supercell contain cells different biological samples, need create new Sample column containing exactly 1 unique value, pass column name runSuperCellCyto function. : may wonder whether possible use SuperCellCyto reduce number cells captured cluster (cell type) can make UMAP/tSNE plot crowded? Commonly cytometry, use stratified sampling subsample clusters drawing UMAP/tSNE plot avoid overcrowding . short answer , yes can. See Using runSuperCellCyto stratified summarising section information.","code":"unique(dat$Sample) #> [1] \"Sample_1\" \"Sample_2\" \"Sample_3\" table(dat$Sample) #>  #> Sample_1 Sample_2 Sample_3  #>    10000    10000    10000"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"creating-supercells","dir":"Articles","previous_headings":"","what":"Creating supercells","title":"How to create supercells","text":"Now imported data, let’s create supercells. First, let’s store markers, sample, cell id column variables: pass , together dataset runSuperCellCyto function create supercells: Now let’s dig deeper object created: list containing 3 elements:","code":"markers_col <- paste0(\"Marker_\", seq_len(n_markers), \"_asinh\") sample_col <- \"Sample\" cell_id_col <- \"Cell_Id_dummy\" supercells <- runSuperCellCyto(   dt = dat,   markers = markers_col,   sample_colname = sample_col,   cell_id_colname = cell_id_col ) #> Warning in SCimplify(X = mt, genes.use = rownames(mt), do.scale = FALSE, : colnames(X) is Null,  #> Gene expression matrix X is expected to have cellIDs as colnames!  #> CellIDs will be created automatically in a form 'cell_i'  #> Warning in SCimplify(X = mt, genes.use = rownames(mt), do.scale = FALSE, : colnames(X) is Null,  #> Gene expression matrix X is expected to have cellIDs as colnames!  #> CellIDs will be created automatically in a form 'cell_i'  #> Warning in SCimplify(X = mt, genes.use = rownames(mt), do.scale = FALSE, : colnames(X) is Null,  #> Gene expression matrix X is expected to have cellIDs as colnames!  #> CellIDs will be created automatically in a form 'cell_i' class(supercells) #> [1] \"list\" names(supercells) #> [1] \"supercell_expression_matrix\" \"supercell_cell_map\"          #> [3] \"supercell_object\""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"supercell-object","dir":"Articles","previous_headings":"Creating supercells","what":"Supercell object","title":"How to create supercells","text":"supercell_object contains metadata used create supercells. list, element contains metadata used create supercells sample. come handy need debug supercells later line.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"supercell-expression-matrix","dir":"Articles","previous_headings":"Creating supercells","what":"Supercell expression matrix","title":"How to create supercells","text":"supercell_expression_matrix contains marker expression supercell. calculated taking average marker expression cells contained within supercell. Therein, following columns: markers previously specified markers_col variable. column (Sample case) denoting sample supercell belongs , (note column name stored sample_col variable). SuperCellId column denoting unique ID supercell.","code":"head(supercells$supercell_expression_matrix) #>    Marker_1_asinh Marker_2_asinh Marker_3_asinh Marker_4_asinh Marker_5_asinh #> 1:       1.872852       2.019909       1.560188       1.610743       1.506353 #> 2:       1.875570       2.037811       1.684019       1.579263       1.396179 #> 3:       1.855086       2.009119       1.576249       1.662939       1.455503 #> 4:       1.822363       1.994605       1.575479       1.660907       1.464458 #> 5:       1.856263       2.011461       1.584364       1.620161       1.452185 #> 6:       1.863853       2.029706       1.573575       1.635628       1.476124 #>    Marker_6_asinh Marker_7_asinh Marker_8_asinh Marker_9_asinh Marker_10_asinh #> 1:       1.828949       1.540053       2.055089       1.439701        1.888460 #> 2:       1.823853       1.591077       2.072301       1.271905        1.874298 #> 3:       1.833658       1.493302       2.040148       1.406397        1.895299 #> 4:       1.847964       1.444526       2.063727       1.446265        1.897996 #> 5:       1.830753       1.425306       2.050317       1.366122        1.891174 #> 6:       1.821135       1.494759       2.059819       1.291531        1.888000 #>    Marker_11_asinh Marker_12_asinh Marker_13_asinh Marker_14_asinh #> 1:       0.9158926        1.323767       1.1556913        1.317133 #> 2:       1.0480850        1.350889       0.8390653        1.205700 #> 3:       1.0528720        1.267242       0.9939983        1.169445 #> 4:       0.6963542        1.324948       0.8055108        1.270159 #> 5:       0.8634084        1.217000       1.0119470        1.197132 #> 6:       1.0332129        1.332130       0.9939185        1.282483 #>    Marker_15_asinh   Sample                 SuperCellId #> 1:        1.642352 Sample_1 SuperCell_1_Sample_Sample_1 #> 2:        1.662549 Sample_1 SuperCell_2_Sample_Sample_1 #> 3:        1.518770 Sample_1 SuperCell_3_Sample_Sample_1 #> 4:        1.655260 Sample_1 SuperCell_4_Sample_Sample_1 #> 5:        1.612056 Sample_1 SuperCell_5_Sample_Sample_1 #> 6:        1.631646 Sample_1 SuperCell_6_Sample_Sample_1 names(supercells$supercell_expression_matrix) #>  [1] \"Marker_1_asinh\"  \"Marker_2_asinh\"  \"Marker_3_asinh\"  \"Marker_4_asinh\"  #>  [5] \"Marker_5_asinh\"  \"Marker_6_asinh\"  \"Marker_7_asinh\"  \"Marker_8_asinh\"  #>  [9] \"Marker_9_asinh\"  \"Marker_10_asinh\" \"Marker_11_asinh\" \"Marker_12_asinh\" #> [13] \"Marker_13_asinh\" \"Marker_14_asinh\" \"Marker_15_asinh\" \"Sample\"          #> [17] \"SuperCellId\""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"supercellid","dir":"Articles","previous_headings":"Creating supercells > Supercell expression matrix","what":"SuperCellId","title":"How to create supercells","text":"Let’s look SuperCellId: Let’s break one , SuperCell_1_Sample_Sample_1. SuperCell_1 numbering (1 however many supercells sample) used uniquely identify supercell sample. Notably, may encounter (SuperCell_1, SuperCell_2) repeated across different samples, e.g., 3 supercells’ id pre-fixed SuperCell_1, make equal one another! SuperCell_1_Sample_Sample_1 contain cells Sample_1 SuperCell_1_Sample_Sample_2 contain cells Sample_2. now, may noticed appended sample name supercell id. aids differentiating supercells different samples.","code":"head(unique(supercells$supercell_expression_matrix$SuperCellId)) #> [1] \"SuperCell_1_Sample_Sample_1\" \"SuperCell_2_Sample_Sample_1\" #> [3] \"SuperCell_3_Sample_Sample_1\" \"SuperCell_4_Sample_Sample_1\" #> [5] \"SuperCell_5_Sample_Sample_1\" \"SuperCell_6_Sample_Sample_1\" supercell_ids <- unique(supercells$supercell_expression_matrix$SuperCellId) supercell_ids[grep(\"SuperCell_1_\", supercell_ids)] #> [1] \"SuperCell_1_Sample_Sample_1\" \"SuperCell_1_Sample_Sample_2\" #> [3] \"SuperCell_1_Sample_Sample_3\""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"supercell-cell-map","dir":"Articles","previous_headings":"Creating supercells","what":"Supercell cell map","title":"How to create supercells","text":"supercell_cell_map maps cell dataset supercell belongs . map useful later need expand supercells . Additionally, also reason need column dataset uniquely identify cell.","code":"head(supercells$supercell_cell_map) #>                      SuperCellID   Sample #> 1: SuperCell_205_Sample_Sample_1 Sample_1 #> 2:  SuperCell_14_Sample_Sample_1 Sample_1 #> 3: SuperCell_360_Sample_Sample_1 Sample_1 #> 4: SuperCell_195_Sample_Sample_1 Sample_1 #> 5:   SuperCell_7_Sample_Sample_1 Sample_1 #> 6:  SuperCell_85_Sample_Sample_1 Sample_1"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"running-runsupercellcyto-in-parallel","dir":"Articles","previous_headings":"","what":"Running runSuperCellCyto in parallel","title":"How to create supercells","text":"default, runSuperCellCyto process sample one . sample processed independent one another, can process parallel. , need create BiocParallelParam object leverages parallel processing. Additionally, also set number tasks number samples, set load_balancing parameter TRUE jobs supercelling large samples assigned small samples (instead given supercelling smaller samples). Notably, set workers total number cores computer, render computer useless anything else (might blow RAM). find total number cores computer, can use parallel’s detectCores.","code":"n_cores <- detectCores() supercell_par <- runSuperCellCyto(   dt = dat,   markers = markers_col,   sample_colname = sample_col,   cell_id_colname = cell_id_col,   BPPARAM = MulticoreParam(     workers = n_cores - 1,     tasks = n_samples   ),   load_balancing = TRUE )"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"controlling-the-supercells-granularity","dir":"Articles","previous_headings":"","what":"Controlling the supercells’ granularity","title":"How to create supercells","text":"described runSuperCellCyto function’s documentation, let’s briefly go . runSuperCellCyto function equipped various parameters can customise alter composition supercells. one likely used gam parameter. gam parameter controls many supercells generate, indirectly, many cells captured within supercell. parameter resolved following formula gam=n_cells/n_supercells n_cell denotes number cells n_supercells denotes number supercells. general, larger gam parameter set , less supercells get. Say instance 10,000 cells. gam set 10, end 1,000 supercells, whereas gam set 50, end 200 supercells. may noticed, reading sections , runSuperCellCyto ran sample independent , can set 1 value gam parameter. Indeed, now, gam value used across samples, depending many cells sample, end different number supercells sample. instance, say 10,000 cells sample 1, 100,000 cells sample 2. gam set 10, sample 1, get 1,000 supercells (10,000/10) sample 2, get 10,000 supercells (100,000/10). future, may add ability specify different gam value different samples. now, want , need break data multiple data.table objects, containing data 1 sample, run runSuperCellCyto function different gam parameter value. Something like following: Subsequently, extract combine supercell_expression_matrix supercell_cell_map, need use rbind:","code":"n_markers <- 10 dat <- simCytoData(nmarkers = n_markers) markers_col <- paste0(\"Marker_\", seq_len(n_markers)) sample_col <- \"Sample\" cell_id_col <- \"Cell_Id\"  samples <- unique(dat[[sample_col]]) gam_values <- c(10, 20, 10)  supercells_diff_gam <- lapply(seq_len(length(samples)), function(i) {   sample <- samples[i]   gam <- gam_values[i]   dat_samp <- dat[dat$Sample == sample, ]   supercell_samp <- runSuperCellCyto(     dt = dat_samp,     markers = markers_col,     sample_colname = sample_col,     cell_id_colname = cell_id_col,     gam = gam   )   return(supercell_samp) }) supercell_expression_matrix <- do.call(   \"rbind\", lapply(supercells_diff_gam, function(x) x[[\"supercell_expression_matrix\"]]) )  supercell_cell_map <- do.call(   \"rbind\", lapply(supercells_diff_gam, function(x) x[[\"supercell_cell_map\"]]) ) rbind(head(supercell_expression_matrix, n = 3), tail(supercell_expression_matrix, n = 3)) #>     Marker_1 Marker_2  Marker_3 Marker_4  Marker_5  Marker_6  Marker_7 #> 1: 17.185352 13.79483  7.199611 7.414705 10.872808  7.092108 10.012109 #> 2: 18.264574 12.94228  7.823381 6.735751  8.869444  9.540956 10.189478 #> 3: 16.358564 13.13526  6.762167 6.833629  8.817561  8.880342 10.227308 #> 4:  8.313754 17.55438 14.235448 3.367899  8.578768 20.559210  9.458997 #> 5:  7.037801 16.67756 15.666086 5.394122  9.370089 18.321914  9.639372 #> 6:  8.967762 15.16358 13.237511 3.696488  9.264790 17.803695  8.824825 #>     Marker_8  Marker_9 Marker_10   Sample                   SuperCellId #> 1: 21.028606 16.703610 11.262654 Sample_1   SuperCell_1_Sample_Sample_1 #> 2: 18.759925 16.709683 10.958189 Sample_1   SuperCell_2_Sample_Sample_1 #> 3: 18.839347 17.541261 11.375325 Sample_1   SuperCell_3_Sample_Sample_1 #> 4:  5.594657  9.119739 12.127811 Sample_2 SuperCell_498_Sample_Sample_2 #> 5:  3.862401  8.714946  9.651773 Sample_2 SuperCell_499_Sample_Sample_2 #> 6:  4.664079 10.308013 12.499662 Sample_2 SuperCell_500_Sample_Sample_2 rbind(head(supercell_cell_map, n = 3), tail(supercell_cell_map, n = 3)) #>                      SuperCellID     CellId   Sample #> 1: SuperCell_719_Sample_Sample_1     Cell_1 Sample_1 #> 2:  SuperCell_39_Sample_Sample_1     Cell_2 Sample_1 #> 3: SuperCell_541_Sample_Sample_1     Cell_3 Sample_1 #> 4: SuperCell_344_Sample_Sample_2 Cell_19998 Sample_2 #> 5: SuperCell_186_Sample_Sample_2 Cell_19999 Sample_2 #> 6: SuperCell_128_Sample_Sample_2 Cell_20000 Sample_2"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"using-runsupercellcyto-for-stratified-summarising","dir":"Articles","previous_headings":"","what":"Using runSuperCellCyto for stratified summarising","title":"How to create supercells","text":"previously mentioned, can use runSuperCellCyto perform stratified summarising, .e., summarise (well, meaningfully sub-sample) cluster cell type. , need change sample column denotes cell type cluster cell belongs . example, let’s first cluster toy data k-means: perform stratified summarising, supply cluster column (kmeans_clusters example ), runSuperCellCyto’s sample_colname parameter. Now, look supercell_expression_matrix, row (supercell) denoted cluster belongs , biological sample came : look number supercells created check many cells cluster, find , cluster, get approximately n_cells/20 20 gam parameter value used runSuperCellCyto (default).","code":"set.seed(42)  # Simulate some data dat <- simCytoData() markers_col <- paste0(\"Marker_\", seq_len(10)) cell_id_col <- \"Cell_Id\"  # Run kmeans clust <- kmeans(   x = dat[, markers_col, with = FALSE],   centers = 5 )  clust_col <- \"kmeans_clusters\" dat[[clust_col]] <- paste0(\"cluster_\", clust$cluster) supercells <- runSuperCellCyto(   dt = dat,   markers = markers_col,   sample_colname = clust_col,   cell_id_colname = cell_id_col ) # Inspect the top 3 and bottom 3 of the expression matrix and some columns. rbind(   head(supercells$supercell_expression_matrix, n = 3),   tail(supercells$supercell_expression_matrix, n = 3) )[, c(\"kmeans_clusters\", \"SuperCellId\", \"Marker_10\")] #>    kmeans_clusters                    SuperCellId Marker_10 #> 1:       cluster_4   SuperCell_1_Sample_cluster_4  14.64662 #> 2:       cluster_4   SuperCell_2_Sample_cluster_4  14.66858 #> 3:       cluster_4   SuperCell_3_Sample_cluster_4  14.41837 #> 4:       cluster_5 SuperCell_498_Sample_cluster_5  16.99003 #> 5:       cluster_5 SuperCell_499_Sample_cluster_5  17.09864 #> 6:       cluster_5 SuperCell_500_Sample_cluster_5  15.85447 # Compute how many cells per cluster, and divide by 20, the gamma value. table(dat$kmeans_clusters) / 20 #>  #> cluster_1 cluster_2 cluster_3 cluster_4 cluster_5  #>    120.25    130.30    119.75    129.70    500.00 table(supercells$supercell_expression_matrix$kmeans_clusters) #>  #> cluster_1 cluster_2 cluster_3 cluster_4 cluster_5  #>       120       130       120       130       500"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_create_supercells.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"How to create supercells","text":"","code":"sessionInfo() #> R version 4.3.2 (2023-10-31) #> Platform: x86_64-pc-linux-gnu (64-bit) #> Running under: Ubuntu 22.04.3 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] parallel  stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #> [1] BiocParallel_1.36.0 SuperCellCyto_0.1.0 BiocStyle_2.30.0    #>  #> loaded via a namespace (and not attached): #>  [1] Matrix_1.6-1.1      jsonlite_1.8.8      compiler_4.3.2      #>  [4] BiocManager_1.30.22 Rcpp_1.0.12         stringr_1.5.1       #>  [7] SuperCell_1.0       jquerylib_0.1.4     systemfonts_1.0.5   #> [10] textshaping_0.3.7   yaml_2.3.8          fastmap_1.1.1       #> [13] lattice_0.21-9      plyr_1.8.9          R6_2.5.1            #> [16] igraph_1.6.0        knitr_1.45          bookdown_0.37       #> [19] desc_1.4.3          bslib_0.6.1         rlang_1.1.3         #> [22] cachem_1.0.8        stringi_1.8.3       RANN_2.6.1          #> [25] xfun_0.41           fs_1.6.3            sass_0.4.8          #> [28] memoise_2.0.1       cli_3.6.2           pkgdown_2.0.7       #> [31] magrittr_2.0.3      digest_0.6.34       grid_4.3.2          #> [34] lifecycle_1.0.4     vctrs_0.6.5         evaluate_0.23       #> [37] glue_1.7.0          data.table_1.14.10  codetools_0.2-19    #> [40] ragg_1.2.7          rmarkdown_2.25      purrr_1.0.2         #> [43] pkgconfig_2.0.3     tools_4.3.2         htmltools_0.5.7"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_prepare_data.html","id":"performing-quality-control","dir":"Articles","previous_headings":"","what":"Performing Quality Control","title":"Preparing Data for SuperCellCyto","text":"Prior creating supercells, ’s crucial ensure dataset undergone thorough quality control (QC). want retain single, live cells remove debris, doublets, dead cells. Additionally, also important perform compensation correct fluorescence spillover (Flow data) adjust signal overlap spillover different metal isotopse (Cytof data). well-prepared dataset key obtaining reliable supercells SuperCellCyto. Several R packages available performing QC cytometry data. Notable among PeacoQC, CATALYST, CytoExploreR. packages well maintained continuously updated. make sure information provide quickly go date, highly recommend consult packages’ respective vignettes detailed guidance use QC data. prefer using manual gating QC, can also use FlowJo. comprehensive guide using FlowJo prepare data, please read vignette. steps taken vignette QC perfectly adequate SuperCellCyto. manuscript, used CytoExploreR QC Oetjen_bcell flow cytometry data CATALYST QC Trussart_cytofruv Cytof data. specific scripts used can found Github repository: b_cell_identification/gate_flow_data.R Oetjen_bcell data. batch_correction/prepare_data.R Trussart_cytofruv data. scripts adapted used CytofRUV manuscript. Oetjen_bcell data, used following gating strategy post compensation: FSC-H FSC-isolate single events. (Also check SSC-H vs SSC-). FSC-SSC-remove debris. Live/Dead SSC-isolate live cells. following resulting single live cells manually gated Oetjen_bcell data.  completing QC process, clean data either CSV FCS file formats. next section guide load files proceed preparing data SuperCellCyto.","code":"knitr::include_graphics(\"figures/oetjen_bcell_single_live_cells.png\", error = FALSE)"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_prepare_data.html","id":"preparing-fcscsv-files-for-supercellcyto","dir":"Articles","previous_headings":"","what":"Preparing FCS/CSV files for SuperCellCyto","title":"Preparing Data for SuperCellCyto","text":"use SuperCellCyto, input data must formatted data.table object. Briefly, data.table enhanced version R native data.frame object. package offers fast processing large data.frame. Additionally, cell data.table must also unique identifier associated sample, typically biological sample came .","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_prepare_data.html","id":"preparing-csv-files","dir":"Articles","previous_headings":"Preparing FCS/CSV files for SuperCellCyto","what":"Preparing CSV files","title":"Preparing Data for SuperCellCyto","text":"Loading CSV files data.table object straightforward. can use fread function data.table package. ’s install : example, let’s load two CSV files containing subsampled data Levine_32dim dataset used SuperCellCyto manuscript. file represents sample (H1 H2), sample name appended file name: Let’s break done: specify location csv files csv_files vector corresponding sample names samples vector. data/Levine_32dim_H1.csv belongs sample H1 data/Levine_32dim_H2.csv belongs sample H2. use lapply simultaneously iterate element csv_files samples vector. csv file corresponding sample, read csv file variable dat_a_sample using fread function. assign sample id new column called sample. result, get list dat containing 2 data.table objects, 1 object per csv file. use rbindlist function data.table package merge list one data.table object. create new column cell_id gives cell unique id Cell_1, Cell_2, etc. Cell_2000 (total 2,000 cells).","code":"install.packages(\"data.table\") library(data.table)  csv_files <- c(\"data/Levine_32dim_H1.csv\", \"data/Levine_32dim_H2.csv\") samples <- c(\"H1\", \"H2\")  dat <- lapply(seq(1: length(samples)), function(i) {   csv_file <- csv_files[i]   sample <- samples[i]      dat_a_sample <- fread(csv_file)   dat_a_sample$sample <- sample      return(dat_a_sample) }) dat <- rbindlist(dat)  dat[, cell_id := paste0(\"Cell_\", seq(1: nrow(dat)))]  head(dat) #>      Time Cell_length      DNA1     DNA2   CD45RA       CD133       CD19 #> 1: 307428          27 169.91125 262.3192 2.338830 -0.15333985 -0.2056334 #> 2:  80712          13  50.91230 181.1320 2.129232  3.35638666 -0.1013980 #> 3: 111390          16 126.93545 269.4199 1.613719 -0.07193317  0.1116483 #> 4:  14088          31 142.67317 283.4645 4.100985  0.09366111 19.4974289 #> 5: 284190          53  98.28069 187.2090 4.289627  0.56254190 12.2265682 #> 6: 481997          35 112.29634 162.4416 6.089430  0.01665318 -0.1943735 #>           CD22       CD11b        CD4          CD8        CD34        Flt3 #> 1: -0.19720075 32.13040161 0.78105438 -0.071934469  1.53498471  0.84833205 #> 2:  3.05647945 14.23928833 0.53373063 -0.007943562 -0.09401329 -0.13234507 #> 3: -0.07421356  2.20701027 9.75063324 -0.034266483  0.53720337 -0.05749827 #> 4:  5.07963181 -0.07880223 0.05995781  0.009049721 -0.19206744  3.36803102 #> 5: 10.81768703  1.82670891 1.30010796 -0.187664956  2.05419374  2.72891521 #> 6:  1.43817198  5.79350042 0.64789140 54.004249573  0.28843120  1.01514077 #>           CD20    CXCR4     CD235ab     CD45       CD123     CD321        CD14 #> 1: -0.08676258 3.488938  0.82301176 313.8038  0.30909532 46.484669  0.05072345 #> 2: -0.04217101 1.364644 -0.13094166 207.2459  1.76594567 22.532978 -0.19256826 #> 3:  0.09777651 3.880993  2.00220966 750.4200 -0.06809702  9.515447 -0.05956535 #> 4:  0.64118648 2.911314 -0.08744399 169.4798  1.25776207  9.218699  1.09861076 #> 5: 15.34162998 9.303430  6.34135485 751.0563  0.05031190 10.463912  1.11993504 #> 6:  3.84020925 3.520693  2.93023992 868.4937 -0.04488884 19.107010  0.62120903 #>           CD33     CD47       CD11c          CD7      CD15        CD16 #> 1:  2.09802437 20.96871 20.76318550 -0.007966662 0.7279212 -0.03067662 #> 2:  7.35230541 27.49848 15.13398170 -0.087256350 0.7187206  0.41139653 #> 3: -0.16046160 53.51268 -0.19080050  1.044164538 2.1075230 -0.14510959 #> 4:  0.18614264 55.07846 -0.07061907  0.948859751 1.2470639  1.12294865 #> 5:  0.15872155 40.63973  4.64010382 -0.195279136 4.5712810 -0.10192144 #> 6: -0.09832545 29.65497  6.15759659 12.104630470 0.5801706 -0.11606000 #>         CD44        CD38      CD13         CD3       CD61       CD117     CD49d #> 1:  95.71002   5.1124768 5.1056433   0.5827813 -0.1684093 -0.02967962  6.557199 #> 2: 185.51929   7.4784145 0.3580886   1.8861074  1.9233229 -0.14122920  1.088500 #> 3:  33.95839   0.6161237 0.3045178 462.1258240  0.7625037 -0.03500306  5.997476 #> 4:  32.46420 249.4612885 1.2526705   0.7302832  3.2274778 -0.18526185  8.533935 #> 5:  98.09428  43.5352974 2.8327518   0.1868679  2.1032026  0.01776284 12.400333 #> 6:  65.91293   2.0126576 1.2817017 390.3737793  2.4605207  0.33154550  5.214703 #>        HLA-DR       CD64         CD41  Viability file_number event_number #> 1: 112.467545  6.9157209  0.083808646  1.7268630          94       257088 #> 2:  12.206795 30.7242870  7.753727913  3.7120194          94        80655 #> 3:  -0.046793 -0.1739236 -0.080375805  0.7011412          94       116394 #> 4:   8.965122  0.3391838 -0.005531122  0.2978864          94         5618 #> 5: 174.952667  0.4361930  1.834125400 13.2743187          94       241699 #> 6:   0.648035 -0.1803290  0.389085352  0.4543665          94       363564 #>    sample cell_id #> 1:     H1  Cell_1 #> 2:     H1  Cell_2 #> 3:     H1  Cell_3 #> 4:     H1  Cell_4 #> 5:     H1  Cell_5 #> 6:     H1  Cell_6"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_prepare_data.html","id":"preparing-fcs-files","dir":"Articles","previous_headings":"Preparing FCS/CSV files for SuperCellCyto","what":"Preparing FCS files","title":"Preparing Data for SuperCellCyto","text":"FCS files, commonly used cytometry, require specific handling. Spectre package excellent tool purpose. can install Spectre using remotes package: Let’s load two FCS files Trussart_cytofruv dataset used manuscript. Spectre’s read.files reads FCS files list data.table objects, one file. data.table object, also add column FileName denoting name file cell come , can use add sample information cells. dataset, FCS files contain data belonging patient (let’s call B2). file name “B2” contains patient’s sample quantified batch 1, file name “Run3_B2” contains patient’s sample quantified batch 2. Let’s name samples “B2_batch1” “B2_batch2”. Now, let’s merge data.table objects add sample information. use rbindlist merge list one data.table object add sample information column. latter done first creating new data.table object containing mapping FileName sample name, using merge.data.table add data.table object. also create new column cell_id gives cell unique id Cell_1, Cell_2, etc. CSV FCS files loaded data.table objects, next step transform data appropriately SuperCellCyto.","code":"install.packages(\"remotes\") remotes::install_github(\"immunedynamics/Spectre\") library(Spectre)  dat_list <- read.files(file.loc = \"data\", file.type = \".fcs\") dat_cytof <- rbindlist(dat_list) sample_info <- data.table(   sample = c(\"B2_batch1\", \"B2_batch2\"),   filename = c(\"B2\", \"Run3_B2\") ) dat_with_sample_info <- merge.data.table(   x = dat_cytof,   y = sample_info,   by.x = \"FileName\",   by.y = \"filename\" )  dat_with_sample_info[, cell_id := paste0(\"Cell_\", seq(1: nrow(dat_with_sample_info)))]"},{"path":"https://phipsonlab.github.io/SuperCellCyto/articles/how_to_prepare_data.html","id":"data-transformation","dir":"Articles","previous_headings":"","what":"Data Transformation","title":"Preparing Data for SuperCellCyto","text":"using SuperCellCyto, ’s essential apply appropriate data transformations. transformations crucial accurate analysis, explained article data transformation. Note: completed QC process outlined CSV files exported FlowJo, can proceed directly next vignette create supercells. details different file types (FCS, CSV scale, CSV channel value), refer guide. common method data transformation cytometry arcsinh transformation, inverse hyperbolic arcsinh transformation. transformation requires specifying cofactor, affects representation low-end data. Typically, cofactor 5 used Cytof data 150 Flow data. vignette focus transformation process rather cofactor selection. -depth information choosing cofactor, read detailed article. ’ll use Levine_32dim dataset loaded earlier CSV files: First, need select markers transformed. Usually, markers transformed SuperCellCyto. However, can choose exclude specific markers needed: transformation, ’ll use cofactor 5 apply arcsinh transformation using Spectre package. Spectre isn’t installed, use: Perform transformation: transformation, new columns “_asinh” appended indicate transformed markers. data now transformed, ’re ready create supercells using SuperCellCyto. Please refer dedicated vignette detailed instructions.","code":"head(dat) #>      Time Cell_length      DNA1     DNA2   CD45RA       CD133       CD19 #> 1: 307428          27 169.91125 262.3192 2.338830 -0.15333985 -0.2056334 #> 2:  80712          13  50.91230 181.1320 2.129232  3.35638666 -0.1013980 #> 3: 111390          16 126.93545 269.4199 1.613719 -0.07193317  0.1116483 #> 4:  14088          31 142.67317 283.4645 4.100985  0.09366111 19.4974289 #> 5: 284190          53  98.28069 187.2090 4.289627  0.56254190 12.2265682 #> 6: 481997          35 112.29634 162.4416 6.089430  0.01665318 -0.1943735 #>           CD22       CD11b        CD4          CD8        CD34        Flt3 #> 1: -0.19720075 32.13040161 0.78105438 -0.071934469  1.53498471  0.84833205 #> 2:  3.05647945 14.23928833 0.53373063 -0.007943562 -0.09401329 -0.13234507 #> 3: -0.07421356  2.20701027 9.75063324 -0.034266483  0.53720337 -0.05749827 #> 4:  5.07963181 -0.07880223 0.05995781  0.009049721 -0.19206744  3.36803102 #> 5: 10.81768703  1.82670891 1.30010796 -0.187664956  2.05419374  2.72891521 #> 6:  1.43817198  5.79350042 0.64789140 54.004249573  0.28843120  1.01514077 #>           CD20    CXCR4     CD235ab     CD45       CD123     CD321        CD14 #> 1: -0.08676258 3.488938  0.82301176 313.8038  0.30909532 46.484669  0.05072345 #> 2: -0.04217101 1.364644 -0.13094166 207.2459  1.76594567 22.532978 -0.19256826 #> 3:  0.09777651 3.880993  2.00220966 750.4200 -0.06809702  9.515447 -0.05956535 #> 4:  0.64118648 2.911314 -0.08744399 169.4798  1.25776207  9.218699  1.09861076 #> 5: 15.34162998 9.303430  6.34135485 751.0563  0.05031190 10.463912  1.11993504 #> 6:  3.84020925 3.520693  2.93023992 868.4937 -0.04488884 19.107010  0.62120903 #>           CD33     CD47       CD11c          CD7      CD15        CD16 #> 1:  2.09802437 20.96871 20.76318550 -0.007966662 0.7279212 -0.03067662 #> 2:  7.35230541 27.49848 15.13398170 -0.087256350 0.7187206  0.41139653 #> 3: -0.16046160 53.51268 -0.19080050  1.044164538 2.1075230 -0.14510959 #> 4:  0.18614264 55.07846 -0.07061907  0.948859751 1.2470639  1.12294865 #> 5:  0.15872155 40.63973  4.64010382 -0.195279136 4.5712810 -0.10192144 #> 6: -0.09832545 29.65497  6.15759659 12.104630470 0.5801706 -0.11606000 #>         CD44        CD38      CD13         CD3       CD61       CD117     CD49d #> 1:  95.71002   5.1124768 5.1056433   0.5827813 -0.1684093 -0.02967962  6.557199 #> 2: 185.51929   7.4784145 0.3580886   1.8861074  1.9233229 -0.14122920  1.088500 #> 3:  33.95839   0.6161237 0.3045178 462.1258240  0.7625037 -0.03500306  5.997476 #> 4:  32.46420 249.4612885 1.2526705   0.7302832  3.2274778 -0.18526185  8.533935 #> 5:  98.09428  43.5352974 2.8327518   0.1868679  2.1032026  0.01776284 12.400333 #> 6:  65.91293   2.0126576 1.2817017 390.3737793  2.4605207  0.33154550  5.214703 #>        HLA-DR       CD64         CD41  Viability file_number event_number #> 1: 112.467545  6.9157209  0.083808646  1.7268630          94       257088 #> 2:  12.206795 30.7242870  7.753727913  3.7120194          94        80655 #> 3:  -0.046793 -0.1739236 -0.080375805  0.7011412          94       116394 #> 4:   8.965122  0.3391838 -0.005531122  0.2978864          94         5618 #> 5: 174.952667  0.4361930  1.834125400 13.2743187          94       241699 #> 6:   0.648035 -0.1803290  0.389085352  0.4543665          94       363564 #>    sample cell_id #> 1:     H1  Cell_1 #> 2:     H1  Cell_2 #> 3:     H1  Cell_3 #> 4:     H1  Cell_4 #> 5:     H1  Cell_5 #> 6:     H1  Cell_6 markers_to_transform <- c(\"CD45RA\",\"CD133\",\"CD19\",\"CD22\",\"CD11b\",\"CD4\",                           \"CD8\",\"CD34\",\"Flt3\",\"CD20\",\"CXCR4\",\"CD235ab\",                           \"CD45\",\"CD123\",\"CD321\",\"CD14\",\"CD33\",\"CD47\",\"CD11c\",                           \"CD7\",\"CD15\",\"CD16\",\"CD44\",\"CD38\",\"CD13\",\"CD3\",\"CD61\",                           \"CD117\",\"CD49d\",\"HLA-DR\",\"CD64\",\"CD41\") install.packages(\"remotes\") remotes::install_github(\"immunedynamics/Spectre\") dat <- do.asinh(dat, markers_to_transform, cofactor = 5)"},{"path":"https://phipsonlab.github.io/SuperCellCyto/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Givanna Putri. Author, maintainer. George Howitt. Author. Felix Marsh-Wakefield. Author. Thomas Ashhurst. Author. Belinda Phipson. Author.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Putri, H G, Howitt, George, Marsh-Wakefield, Felix, Ashhurst, Myles T, Phipson, Belinda (2023). “SuperCellCyto: enabling efficient analysis large scale cytometry datasets.” bioRxiv. doi:10.1101/2023.08.14.553168.","code":"@Article{,   title = {SuperCellCyto: enabling efficient analysis of large scale cytometry datasets},   author = {{Putri} and Givanna H and {Howitt} and {George} and {Marsh-Wakefield} and {Felix} and {Ashhurst} and Thomas Myles and {Phipson} and {Belinda}},   journal = {bioRxiv},   year = {2023},   doi = {https://doi.org/10.1101/2023.08.14.553168}, }"},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"supercellcyto","dir":"","previous_headings":"","what":"SuperCell For Cytometry Data","title":"SuperCell For Cytometry Data","text":"SuperCellCyto extension SuperCell R package. Initially developed scRNAseq data, SuperCell aggregates cells similar transcriptomic profiles “supercells” (also known “metacells” scRNAseq literature). SuperCellCyto, ’ve tailored SuperCell package specifically cater cytometry data: Supercells now aggregating cells similar marker expressions. Supercells now created individual sample. adaptation ensures supercell encompasses cells exclusively one sample. processing sample independently, prevent intermixing cells different samples within supercells. Multiple samples can now processed parallel custom load balancing strategy. enhancement enables simultaneous generation supercells multiple samples, significantly reducing computational time required processing large datasets.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"vignettes-and-function-documentation","dir":"","previous_headings":"","what":"Vignettes and Function Documentation","title":"SuperCell For Cytometry Data","text":"understand SuperCellCyto can integrated workflow, head Articles page. Click dropdown arrow Articles link navbar top website. vignettes provide step--step guides, practical examples, use-case scenarios demonstrate package’s application various research contexts. Documentation usage function SuperCellCyto package available Reference page. Click Reference link navbar top website.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"SuperCell For Cytometry Data","text":"use SuperCellCyto study, please kindly cite preprint bioRxiv: Putri, G. H., Howitt, G., Marsh-Wakefield, F., Ashhurst, T. M., & Phipson, B. (2023). SuperCellCyto: enabling efficient analysis large scale cytometry datasets. bioRxiv; DOI: https://doi.org/10.1101/2023.08.14.553168","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"SuperCell For Cytometry Data","text":"package can installed using remotes: SuperCellCyto requires SuperCell R package installed run properly. use installation command , , theory, automatically installed. case doesn’t, please manually install running following command beforehand:","code":"# Install remotes install.packages(\"remotes\")  # Install SuperCellCyto from this repository remotes::install_github(\"phipsonlab/SuperCellCyto\") # Install SuperCell from their github repository remotes::install_github(\"GfellerLab/SuperCell\")"},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"SuperCell For Cytometry Data","text":"Please note SuperCellCyto project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/index.html","id":"contribution-guide","dir":"","previous_headings":"","what":"Contribution guide","title":"SuperCell For Cytometry Data","text":"Please visit Contributing Guide","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":null,"dir":"Reference","previous_headings":"","what":"Recompute supercells — recomputeSupercells","title":"Recompute supercells — recomputeSupercells","text":"Given supercell object, recreate supercells using different gamma value. Gamma value controls number supercells generated. smaller value, supercells get, vice versa. function run, need least run runSuperCellCyto function !","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recompute supercells — recomputeSupercells","text":"","code":"recomputeSupercells(   dt,   sc_objects,   markers,   sample_colname,   cell_id_colname,   gam = 20 )"},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recompute supercells — recomputeSupercells","text":"dt data.table object containing cytometry data rows represent cells columns represent markers. sc_objects supercell_object returned runSuperCellCyto function. markers character vector identifying markers create supercells . sample_colname character string identifying column dt denotes sample cell. cell_id_colname character string identifying column dt representing cell's unique ID. gam numeric value specifying gamma value regulates number supercells generated. Defaults 20.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recompute supercells — recomputeSupercells","text":"list following components: supercell_expression_matrix:  data.table object contains marker expression supercell. marker expressions computed calculating mean marker expressions across cells within individual supercell. supercell_cell_map: data.table maps cell corresponding supercell. table essential identifying specific supercell cell allocated . proves particularly useful analyses require one expand supercells individual cell level.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Recompute supercells — recomputeSupercells","text":"Givanna Putri","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/recomputeSupercells.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recompute supercells — recomputeSupercells","text":"","code":"set.seed(42) cyto_dat <- simCytoData(10, rep(1000, 3)) markers <- paste0(\"Marker_\", seq_len(10)) out_gam20 <- runSuperCellCyto(     dt = cyto_dat,     markers = markers,     sample_colname = \"Sample\",     cell_id_colname = \"Cell_Id\",     gam = 20 ) recomputed_sc <- recomputeSupercells(     dt = cyto_dat,     sc_objects = out_gam20$supercell_object,     markers = markers,     sample_colname = \"Sample\",     cell_id_colname = \"Cell_Id\",     gam = 50 )"},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":null,"dir":"Reference","previous_headings":"","what":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"function creates supercells cytometry data formatted data.table object using SuperCellCyto algorithm. Please make sure read additional details better understand function works.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"","code":"runSuperCellCyto(   dt,   markers,   sample_colname,   cell_id_colname,   gam = 20,   k_knn = 5,   BPPARAM = SerialParam(),   load_balancing = FALSE )"},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"dt data.table object containing cytometry data rows represent cells columns represent markers. data.frame object, function try convert data.table object. warning message displayed happens. Otherwise, terminate. markers character vector identifying markers create supercells . sample_colname character string identifying column dt denotes sample cell. cell_id_colname character string identifying column dt representing cell's unique ID. gam numeric value specifying gamma value regulates number supercells generated. Defaults 20. k_knn numeric value specifying k value (number neighbours) used build kNN network. Defaults 5. BPPARAM BiocParallelParam object specifying parallel processing settings. Defaults SerialParam, meaning samples processed sequentially one . Refer additional details section parallel processing details. load_balancing logical value  indicating whether use custom load balancing scheme processing multiple samples parallel. Defaults FALSE. Refer additional details section parallel processing details.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"list following components: supercell_object: list containing object returned SCimplify function. One object per sample. object critical recomputing supercells future. Hence discard . supercell_expression_matrix:  data.table object contains marker expression supercell. marker expressions computed calculating mean marker expressions across cells within individual supercell. supercell_cell_map: data.table maps cell corresponding supercell. table essential identifying specific supercell cell allocated . proves particularly useful analyses require one expand supercells individual cell level.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"parallel-processing","dir":"Reference","previous_headings":"","what":"Parallel Processing","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"SuperCellCyto can process multiple samples simultaneously parallel. can drastically bring processing time dataset large number samples. enable feature, set BPPARAM parameter either MulticoreParam object SnowParam object. Importantly, also recommended set number tasks (.e., task parameter either MulticoreParam SnowParam object) number samples dataset. Furthermore, also recommend setting load_balancing parameter TRUE. ensures optimal distribution samples across multiple cores, particularly important samples varying sizes (number cells).","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"cell-id-and-sample-definitions","dir":"Reference","previous_headings":"","what":"Cell ID and Sample Definitions","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"cell_id_colname parameter specifies column dt denotes unique identifier cell. perfectly normal column dataset default. good news trivial create one. can create new vector containing sequence numbers 1 however many cells , append vector new column dataset. Refer vignette . sample_colname parameter specifies column dt denotes sample cell came . default, SuperCellCyto creates supercells sample independent samples. ensures supercell contain cells exactly one sample. constitute sample? purposes, sample represents biological sample experiment. may thinking, possible use different context, say creating supercells population cluster rather biological sample? short answer yes, address vignette.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"computing-pca","dir":"Reference","previous_headings":"","what":"Computing PCA","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"function start computing PCA markers specified markers parameter. default, number PCs calculated set 10. less 10 markers markers parameter, number PCs set however many markers markers parameter. Notably, scaling transformation done markers' expressions prior computing PCs. function use irlba calculate PCA. little gain use cytometry data relatively tiny number features (markers) data.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"setting-supercell-s-resolution","dir":"Reference","previous_headings":"","what":"Setting Supercell's Resolution","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"gam parameter influences number supercells created per sample. lower gam value results , thus generally smaller supercells, vice versa. estimate many supercells get dataset, important understand gam value interpreted context number cells sample. gam=n_cells/n_supercells n_cells denotes number cells n_supercells denotes number supercells created. resolving formula , can roughly estimate many supercells get per sample. example, say 2 samples, sample B. Sample 10,000 cells, sample B 5,000 cells: gam set 10, end 1,000 supercells sample 500 supercells sample B, total 1,500 supercells. gam set 50, end 200 supercells sample 100 supercells sample B, total 300 supercells. Importantly, one expect supercells size. capture /less cells others. trivial estimate many cells captured supercell beforehand.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"computing-knn-network","dir":"Reference","previous_headings":"","what":"Computing kNN network","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"create supercells, kNN (k-Nearest Neighbors) network constructed based k_knn parameter dictates number neighbours (cell) used create network. actual (approximate) kNN network created. walktrap algorithm uses network group cells supercells.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"Givanna Putri","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/runSuperCellCyto.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run SuperCellCyto on Cytometry Data — runSuperCellCyto","text":"","code":"# Simulate some data set.seed(42) cyto_dat <- simCytoData(nmarkers = 10, ncells = rep(2000,2))  # Setup the columns designating the markers, samples, and cell IDs marker_col <- paste0(\"Marker_\", seq_len(10)) sample_col <- \"Sample\" cell_id_col <- \"Cell_Id\"  supercell_dat <- runSuperCellCyto(     cyto_dat, marker_col,     sample_col, cell_id_col )"},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate cytometry data — simCytoData","title":"Simulate cytometry data — simCytoData","text":"Simulate cytometry data use testing documenting functions require cytometry data. Please run set.seed running function want ensure reproducibility.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate cytometry data — simCytoData","text":"","code":"simCytoData(nmarkers = 10, ncells = rep(10000, 2))"},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate cytometry data — simCytoData","text":"nmarkers numeric value specifying number markers simulate. ncells numeric vector specifying number cells simulate per sample. 1 vector element per sample.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate cytometry data — simCytoData","text":"data.table object containing simulated cytometry data rows represent cells columns represent markers.","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Simulate cytometry data — simCytoData","text":"Givanna Putri","code":""},{"path":"https://phipsonlab.github.io/SuperCellCyto/reference/simCytoData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate cytometry data — simCytoData","text":"","code":"set.seed(42) cyto_dat <- simCytoData() head(cyto_dat) #>    Marker_1 Marker_2  Marker_3 Marker_4 Marker_5 Marker_6 Marker_7 Marker_8 #> 1: 18.61597 17.43348  9.213419 18.40881 13.68860 12.77402 15.24751 7.140615 #> 2: 20.23361 19.82792  9.740510 18.16383 13.97108 14.25898 16.05032 5.863752 #> 3: 18.62743 17.76816 11.175358 18.59606 16.08534 13.69734 16.71550 4.750240 #> 4: 20.74051 19.94771  9.797939 18.43590 13.92092 12.64266 15.55953 8.173464 #> 5: 18.65938 18.87830  8.916928 17.83295 15.62066 11.37118 16.08417 6.664707 #> 6: 20.02696 20.76054  9.262685 16.89373 15.92339 13.40002 16.13880 6.862717 #>    Marker_9 Marker_10   Sample Cell_Id #> 1: 14.37555  14.18484 Sample_1  Cell_1 #> 2: 15.58007  15.56981 Sample_1  Cell_2 #> 3: 14.16156  14.92222 Sample_1  Cell_3 #> 4: 14.26637  15.10761 Sample_1  Cell_4 #> 5: 15.12219  15.64231 Sample_1  Cell_5 #> 6: 15.85313  15.52535 Sample_1  Cell_6 dim(cyto_dat) #> [1] 20000    12"},{"path":"https://phipsonlab.github.io/SuperCellCyto/news/index.html","id":"supercellcyto-010","dir":"Changelog","previous_headings":"","what":"SuperCellCyto 0.1.0","title":"SuperCellCyto 0.1.0","text":"first release SuperCellCyto. also version SuperCellCyto used preprint:","code":"@article{     putri2023supercellcyto,     title={SuperCellCyto: enabling efficient analysis of large scale cytometry datasets},     author={Putri, Givanna H and Howitt, George and Marsh-Wakefield, Felix and Ashhurst, Thomas Myles and Phipson, Belinda},     journal={bioRxiv},     pages={2023--08},     year={2023},     publisher={Cold Spring Harbor Laboratory} }"}]
